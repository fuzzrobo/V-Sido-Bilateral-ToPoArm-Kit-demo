# 学習

ディレクトリに注意

```
pip install --upgrade protobuf
pip install wandb
wandb login   
```

APIキーを貼り付ける

```
**************************
```

[Weights & Biases: AI開発者プラットフォーム](https://wandb.ai/site/ja/)

実行前にtrainのパラメータを変更する

- 学習パラメータの変更
    
    lerobot/src/lerobot/configs/train.py
    
    [元コード](https://www.notion.so/2764829d58628102bcb7d6ee0e56c457?pvs=21)
    
    このパラメータを変更
    
    例
    
    ```
    seed: int | None = 1000
    # Number of workers for the dataloader.
    num_workers: int = 8
    batch_size: int = 4
    steps: int = 30000
    eval_freq: int = 1000
    log_freq: int = 50
    save_checkpoint: bool = True
    # Checkpoint is saved every `save_freq` training iterations and after the last training step.
    save_freq: int = 200
    ```
    
    | steps | 総ステップ数 | パラメータの更新回数 |
    | --- | --- | --- |
    | batch_size | バッチサイズ | 1ステップあたりのデータ/軌道の数 |
    | num_workers | サブプロセスの数 | cpu core の数 -2くらい |
    | eval_freq | 評価エピソード実行間隔 | 一度学習を止めて、ポリシーの評価を行う。 |
    | save_freq | モデルチェックポイントの保存間隔 | steps< save_freqだと保存されないので注意 |
    | log_freq | ログの実行間隔 | ターミナルへのログの間隔 |
    

学習

```
cd lerobot/src
```

```
python lerobot/scripts/train.py \
  --dataset.repo_id=${HF_USER}/topo_test1014_3 \
  --policy.type=act \
  --policy.repo_id=${HF_USER}/topo_test1014_3 \
  --output_dir=outputs/train/act_topo_test1014_3 \
  --job_name=act_pick_topo_test1014_3 \
  --policy.device=cuda \
  --wandb.enable=false
```

学習データの削除

```
cd lerobot/src/outputs/train
rm -rf topo_test1014_1
```